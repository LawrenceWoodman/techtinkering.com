<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>Beginning Assembly Programming on the Commodore VIC-20</title>
  <meta name="description" content="The Commodore Vic-20 is a great machine to learn an assembly language on.  It was released in 1981 and was the first computer to sell one million units, which co">
  <meta name="keywords" content="Retro Vintage Programming Tinkering"/>

  <!-- *** Twitter Card *** -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@techtinkering">
  <meta name="twitter:title" content="Beginning Assembly Programming on the Commodore VIC-20">
  <meta name="twitter:description" content="The Commodore Vic-20 is a great machine to learn an assembly language on.  It was released in 1981 and was the first computer to sell one million units, which co">
  <!-- *** Twitter Card *** -->

  <!-- *** Open Graph *** --->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Beginning Assembly Programming on the Commodore VIC-20">
  <meta property="og:description" content="The Commodore Vic-20 is a great machine to learn an assembly language on.  It was released in 1981 and was the first computer to sell one million units, which co">
  <meta property="og:url" content="https://techtinkering.com/2013/04/16/beginning-assembly-programming-on-the-commodore-vic-20/">
  <!-- *** Open Graph *** --->

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-4388762-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-4388762-2');
  </script>

  <link href="/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/prism.css" rel="stylesheet">
  <link href="/css/main.css" rel="stylesheet">
  <link href="/css/extra.css" rel="stylesheet">
  <link href="/css/article.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" rel="stylesheet" type="text/css" />
  <link rel="canonical" href="https://techtinkering.com/2013/04/16/beginning-assembly-programming-on-the-commodore-vic-20/">
  <link rel="alternate" type="application/rss+xml" title="TechTinkering - Retro Computers, Programming, General Technical Tinkering"
        href="http://feedproxy.google.com/TechTinkering" />

	<!-- ****** faviconit.com favicons ****** -->
	<link rel="shortcut icon" href="/favicon.ico">
	<link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
	<!-- ****** faviconit.com favicons ****** -->

  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

  <script src="/js/jquery-3.3.1.min.js"></script>
  <script src="/js/bootstrap.min.js"></script>
  <script src="/js/prism.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

  <script>
    // Cookie Consent - https://cookieconsent.insites.com
    window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#252e39"
        },
        "button": {
          "background": "#14a7d0"
        }
      },
      "theme": "classic",
      "position": "top",
      "static": true,
      "content": {
        "message": "TechTinkering uses cookies for advertising, analytics, etc.",
        "href": "http://techtinkering.com/privacy/"
      }
    })});
  </script>

  <script>
    (adsbygoogle = window.adsbygoogle || []).push({
         google_ad_client: "ca-pub-1613732348909658",
         enable_page_level_ads: true
    });
  </script>
</head>
  <body>
    <nav class="navbar navbar-default">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">TechTinkering</a>
    </div>

    <div id="navbar" class="collapse navbar-collapse navbar-right">
      <ul class="nav navbar-nav navbar-right contact-buttons">
        <li>
          <!-- From: http://www.buttonshut.com/Get-Button-Huts-Code/Twitter-Buttons-1124.html -->
          <a href="http://twitter.com/TechTinkering" title="@TechTinkering on Twitter">
            <img class="bannerIcon" src="/images/twitter-button-36.png" alt="@techtinkering on Twitter"/>
          </a>
        </li>
        <li>
          <!-- From: http://www.buttonshut.com/Get-Button-Huts-Code/Youtube-Buttons-831.html -->
          <a href="http://youtube.com/techtinkering" title="TechTinkering's YouTube Channel">
            <img class="bannerIcon" src="/images/youtube-small-square-32.png" alt="YouTube Channel"/>
          </a>
        </li>
        <li>
          <!-- From: http://www.graphicsfuel.com/2011/05/email-icon-psd/ -->
          <a href="mailto:techtinkering@vlifesystems.com" title="Email us, we'd love to hear from you">
            <img class="bannerIcon" src="/images/email.png" alt="Email"/>
          </a>
        </li>
        <li>
          <a href="https://github.com/lawrencewoodman/techtinkering.com" title="Fork TechTinkering On GitHub ">
            <img class="bannerIcon" src="/images/octocat_fluid.png" "TechTinkering Repo on GitHub"/>
          </a>
        </li>
        <li>
          <a href="http://feeds.feedburner.com/TechTinkering" title="Subscribe to our RSS Feed">
            <img class="bannerIcon" src="/images/feed-icon-28x28.png" alt="RSS Feed"/>
          </a>
        </li>
      </ul>

    </div><!--/.nav-collapse -->
  </div>
</nav>
    <div id="content" class="container">
      <div class="row margin-buffer">
  <div class="col-md-12">
    <article itemscope itemtype="http://schema.org/BlogPosting">
      <header>
        <a href="/2013/04/16/beginning-assembly-programming-on-the-commodore-vic-20/" title="Beginning Assembly Programming on the Commodore VIC-20">
          <h1 itemprop="headline name">Beginning Assembly Programming on the Commodore VIC-20</h1>
        </a>
        <div class="pull-right">
          <ul class="share-buttons">
  <li><a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Ftechtinkering.com&text=:%20http%3A%2F%2Ftechtinkering.com&via=TechTinkering" target="_blank" title="Tweet" onclick="window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(document.title) + ':%20'  + encodeURIComponent(document.URL)); return false;"><img alt="Tweet" src="/img/social_flat_rounded_rects_svg/Twitter.svg" /></a></li>
  <li><a href="http://www.reddit.com/submit?url=http%3A%2F%2Ftechtinkering.com&title=" target="_blank" title="Submit to Reddit" onclick="window.open('http://www.reddit.com/submit?url=' + encodeURIComponent(document.URL) + '&title=' +  encodeURIComponent(document.title)); return false;"><img alt="Submit to Reddit" src="/img/social_flat_rounded_rects_svg/Reddit.svg" /></a></li>
  <li><a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Ftechtinkering.com&quote=" title="Share on Facebook" target="_blank" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=' + encodeURIComponent(document.URL) + '&quote=' + encodeURIComponent(document.URL)); return false;"><img alt="Share on Facebook" src="/img/social_flat_rounded_rects_svg/Facebook.svg" /></a></li>
  <li><a href="mailto:?subject=&body=:%20http%3A%2F%2Ftechtinkering.com" target="_blank" title="Send email" onclick="window.open('mailto:?subject=' + encodeURIComponent(document.title) + '&body=' +  encodeURIComponent(document.URL)); return false;"><img alt="Send email" src="/img/social_flat_rounded_rects_svg/Email.svg" /></a></li>
</ul>
        </div>
        <div>
            <time itemprop="datePublished"
                  datetime="2013-04-16">
              16 April 2013
            </time>
            &nbsp; / &nbsp;
          <span itemscope itemprop="publisher"
                itemtype="http://schema.org/Organization">
            <meta itemprop="name" content="TechTinkering" />
            <meta itemprop="url" content="https://techtinkering.com" />
          </span>
          <span itemscope itemprop="author" itemtype="http://schema.org/Person">
            <a rel="author" itemprop="url" href="https://lawrencewoodman.github.io">
              <span itemprop="name">Lawrence Woodman</span>
            </a>
          </span>
          &nbsp; / &nbsp;
            <a href="/articles/tag/assembly/">Assembly</a>
            &nbsp; &nbsp;
            <a href="/articles/tag/commodore/">Commodore</a>
            &nbsp; &nbsp;
            <a href="/articles/tag/programming/">Programming</a>
            &nbsp; &nbsp;
            <a href="/articles/tag/retro/">Retro</a>
            &nbsp; &nbsp;
            <a href="/articles/tag/vic-20/">VIC-20</a>
            &nbsp; &nbsp;
        </div>
      </header>
      <br />
      <div itemprop="articleBody">
        <p>The Commodore Vic-20 is a great machine to learn an assembly language on.  It was released in 1981 and was the first computer to sell one million units, which contributes to its popularity today.  The machine is well documented, well supported through forums and much of the hardware is plentiful and quite cheap.  The <a href="http://en.wikipedia.org/wiki/6502">6502</a> has a smaller instruction set than the <a href="http://en.wikipedia.org/wiki/Z80">Z80</a> for example and the Vic-20, because of it's limited power, doesn't take long to learn most things about it.  This is ideal for busy people who can only afford to spend so much time exploring.</p>
<p>Here I will show you how to get started programming the Vic-20 in assembly language.  I will not be teaching 6502 assembly language itself as there are better resources available and I will link to these.  I will, however, be showing you what you need to get started, where some of the best resources are and I will be giving a few examples to whet your appetite.</p>
<h2>Assembly Language</h2>
<p>Assembly language is a mnemonic representation of the computers underlying machine language.  It allows you to represent the following machine language in <a href="http://en.wikipedia.org/wiki/Hexadecimal">hexadecimal</a> octets:</p>
<pre><code class="language-text">A9 93 20 D2 FF 00
</code></pre>
<p>as assembly language (with comments to explain what is happening)</p>
<pre><code class="language-asm6502">LDA #$93   ; Load the Accumulator register (A storage location in the CPU)
           ; with the value $93, which is the Clear Screen code
JSR $FFD2  ; Jump to a subroutine at location $FFD2 (Print a character routine).
BRK        ; Break out of the program.
</code></pre>
<p>One you get used to 6502 assembly language you will be able to read it much easier than machine language.  That said, you will naturally become familiar with the machine language as well when you are debugging and inspecting memory.  So you will easily spot BRK ($00) or JSR ($20) instructions.  This familiarity gives you a much closer connection to the machine and ultimately allows you to fine tune your programs to get the most out it.</p>
<p>It is useful to know that a <code>$</code> indicates a hexadecimal number, a <code>%</code> a binary number, and if neither then a decimal number.  If a number is prefixed with a <code>#</code> this says that it is a literal number as opposed to being a reference to an address in memory.</p>
<h2>Vicmon: A Machine Language Monitor</h2>
<p>A machine language monitor is a good way to start learning assembly language.  Vicmon was released by Commodore in 1982 and hence is quite common.  A ML monitor allows you to inspect and alter memory as well as run code from memory.  In addition many, including Vicmon, allow you to assemble (turn mnemonic representations of machine code into actual machine code) and disassemble (turn machine code into a mnemonic representation).  The interactive nature makes it an ideal learning tool as you can try things out and straightaway see what happens.  Later on a ML monitor can help you to debug your programs and understand other people's better.</p>
<p><a href="http://www.zimmers.net/anonftp/pub/cbm/vic20/roms/tools/4k/Vicmon-6000.prg" title="Vicmon 4k Cartridge image">Vicmon </a> can be downloaded from the <a href="http://www.zimmers.net/anonftp/pub/cbm/vic20/roms/tools/4k/">zimmers.net 4k tool ROMS archive</a> and a <a href="http://funet.cbm8bit.com/cbm/vic20/manuals/VICMON-DOCS.zip">manual</a> is available from the <a href="http://funet.cbm8bit.com/cbm/vic20/manuals/">funet.cbm8bit.com vic-20 manuals archive</a>.</p>
<h2>Using Vicmon</h2>
<p>Attach your Vicmon cartridge while your Vic-20 is off and then turn it on. Or if using an emulator, attach the cartridge image at $6000.</p>
<p>To enter the monitor from BASIC:</p>
<pre><code class="language-basic">SYS 24576
</code></pre>
<p>This brings up a status showing the registers and Program Counter (PC), followed by the <code>.</code> prompt.</p>
<h3>Vicmon Commands</h3>
<p>Below is a list of commands used in this article.  To see more commands and a more in-depth explanation of them look at the manual linked above.  Other monitors use similar commands, but you will have to check their manual for the specifics.</p>
<table class="neatTable">
  <tr><th>Command</th><th style="width: 14em;">Parameters</th><th>Explanation</th></tr>
  <tr><td>A</td><td>address opcode operand</td><td>Input assembly code and have it stored as machine code.</td></tr>
  <tr><td>D</td><td>startAddress [EndAddress]</td><td>Convert machine code at <em>startAddress</em> or between the two addresses to assembly language.</td></tr>
  <tr><td>G</td><td>[address]</td><td>Execute a program at the current <em>PC</em> (Program Counter) or <em>address</em> if specified.</td></tr>
  <tr><td>L</td><td>"filename" device</td><td>Load a program file from <em>device</em> into memory at the location it was originally saved from.</td></tr>
  <tr><td>M</td><td>startAddress [EndAddress]</td><td>Display memory at <em>startAddress</em> or between the two addresses and allow you to alter it.</td></tr>
  <tr><td>S</td><td>"filename" device startAddress endAddress</td><td>Save memory between the two addresses to <em>device</em>.</td></tr>
</table>
<h2>Peeking and Poking Around in Memory</h2>
<p>The <code>M</code> command allows you to peek (look) into memory and to poke (alter) memory.
If you look at these <a href="http://archive.org/stream/VIC-20ProgrammersReferenceGuide1stEdition6thPrinti/VIC-20_Programmers_Reference_Guide_1st_Edition_6th_Printing#page/n279/mode/2up">screen &amp; border colour combinations</a>, you'll see how you can change the screen and border colour by altering location <code>36879</code>.  We'll change the display to a Pink screen and Blue border which is <code>174</code> in the chart.  So remembering that Vicmon works in hex, we convert <code>36879</code> to <code>900F</code> and <code>174</code> to <code>AE</code>.  We can now change the screen and border colour using the <code>M</code> command from the <code>.</code> prompt:</p>
<pre><code class="language-text">.M 900F
</code></pre>
<p>Now alter the first octet to <code>AE</code> and press &lt;Return&gt;.  You'll see the screen and border change colour.</p>
<img src="/img/articles/vic20-vicmon-blue-border-pink-screen.png" />
<p>Within Vicmon you can use the cursor keys to navigate back over the number, change it and press &lt;Return&gt; to see the colours change again.</p>
<p>If you look at the <a href="http://archive.org/stream/VIC-20ProgrammersReferenceGuide1stEdition6thPrinti/VIC-20_Programmers_Reference_Guide_1st_Edition_6th_Printing#page/n185/mode/2up">memory map</a> you'll see plenty of other interesting places to inspect and alter.</p>
<h2>Assembling / Disassembling</h2>
<p>To turn assembly language into machine code you use an assembler; to turn it back again your use a disassembler.  Vicmon includes both, which makes entering code much easier and also allows you to look at other people's code or the Basic KERNAL to work out how something has been done.</p>
<h3>Clear Screen Program</h3>
<p>To enter the piece of code above to clear the screen we use the <code>A</code> command from the <code>.</code> prompt (&lt;Return&gt; indicates pressing the return key):</p>
<pre><code class="language-text">.A 1400 LDA #$93
        JSR $FFD2
        BRK
        &lt;Return&gt;
</code></pre>
<p>The <code>1400</code> above tells the assembler the hex location where we want to start entering the code.  <code>$1400</code> was chosen as it is an area of free memory as can be seen in the memory map referenced previously.</p>
<p>The program Loads into the Accumulator the value <code>$93</code>.  The Accumulator is an area of fast memory located within the 6502 CPU.  <code>$93</code> (decimal 147) is a literal value representing the <code>CLR</code> (Clear Screen) character as seen in the list of <a href="http://archive.org/stream/VIC-20ProgrammersReferenceGuide1stEdition6thPrinti/VIC-20_Programmers_Reference_Guide_1st_Edition_6th_Printing#page/n287/mode/2up">ASCII and CHR$ codes</a>.  Then it Jumps to a subroutine in memory at address <code>$FFD2</code>.  A subroutine is a piece of code in memory that does something and knows how to return to where it was called.  In this case <code>$FFD2</code> is the <code>CHROUT</code> (Output character to channel) subroutine which can be found in the list of <a href="http://archive.org/stream/VIC-20ProgrammersReferenceGuide1stEdition6thPrinti/VIC-20_Programmers_Reference_Guide_1st_Edition_6th_Printing#page/n199/mode/2up">user callable KERNAL routines</a>.  <code>CHROUT</code> expects the character to be output to be in the Accumulator, hence the reason that it was put there previously.  Once the subroutine has finished it returns to the instruction after the one that called it.  Here this is the <code>BRK</code> instruction, which says that processing has finished and control will be returned to the ML monitor.</p>
<p>To run it:</p>
<pre><code class="language-text">. G 1400
</code></pre>
<p>To look again at our code by disassembling it:</p>
<pre><code class="language-text">.D 1400, 1405
</code></pre>
<p>Which shows:</p>
<pre><code class="language-text">., 1400 LDA #$93
., 1402 JSR $FFD2
., 1405 BRK
</code></pre>
<h3>Hello, World!</h3>
<p>In introductory programming tutorials it is customary to do a &quot;Hello, World!&quot; program.  We'll do this by extending the program above past the clear screen routine:</p>
<pre><code class="language-text">.A 1405 LDX #$00
        LDA $1413, X
        BEQ $1412
        JSR $FFD2
        INX
        BNE $1407
        BRK
        &lt;Return&gt;
</code></pre>
<p>This code starts by Loading the <code>X</code> index register with the value <code>$00</code> and then Loading the <em>Accumulator</em> with the value at memory location <code>$1413 + X</code>.  This location is where the &quot;Hello, World!&quot; string is held.  So it allows each character of the string to be put into the <em>Accumulator</em>.  Once the character is loaded, it is checked to see if it Equals zero; if it is then the code Branches to <code>$1412</code>, which is the location of the <code>BRK</code> instruction as can be seen in the disassembly below.  Therefore <code>0</code> is used to mark the end of the string.  With the character in the <em>Accumulator</em>, the program can now Jump to the Subroutine at <code>$FFD2</code> (CHROUT) to output this character.  The <code>X</code> index register is now incremented by one and the code Branches back to the instruction that loads the next character from the string.</p>
<p>If you look at the following two lines from the code above you will see that they refer to the addresses <code>$1412</code> and <code>$1413</code> whose location wasn't known at the time of entering them.</p>
<pre><code class="language-text">LDA $1413, X
BEQ $1412
</code></pre>
<p>To get around this, when the program was first written I put in dummy values and made a note of which places I needed to go back to, to correct the forward references.  Once the program was entered I could disassemble it and find the locations of the <code>BRK</code> instruction and the one past it for the string.  Armed with this I went back and using the <code>A</code> command altered those lines to point to the correct locations.</p>
<p>It maybe instructive to know why a <code>BNE</code> (Branch if Not Equal) instruction was chosen instead of a <code>JMP</code> instruction.  If we look at the table below we can see that the <code>BNE</code> instruction takes less bytes in memory (2 instead of 3).  The reason for this is that the <code>BNE</code> instruction uses <em>relative</em> addressing, so instead of specifying an <em>absolute</em> address to Branch to, the assembler converts <code>BNE $1407</code> to the opcode for <code>BNE</code> (<code>$D0</code>) followed by a <strong>single</strong> byte representing the number of bytes forwards or backwards to get to <code>$1407</code>.  This allows a maximum distance of 128 bytes backwards and 127 bytes forward because a single byte can have 256 possible values.  Whereas the <code>JMP</code> instruction gets assembled to the opcode for <code>JMP</code> (<code>$4C</code>) followed by the <strong>two</strong> bytes of <code>$1407</code>.</p>
<table class="neatTable">
  <tr><th>Instruction</th><th>Addressing Mode</th><th>Number of Bytes</th></tr>
  <tr><td>BNE</td><td>Relative</td><td>2</td></tr>
  <tr><td>JMP</td><td>Absolute</td><td>3</td></tr>
</table>
<p>The <code>BNE</code> instruction also has the added bonus that it protects the program from running for ever in case the <code>0</code> is forgotten at the end of the string.  Once <code>X</code> gets to <code>255</code> if it is incremented it will become <code>0</code> and the <code>BNE</code> instruction will pass control to the <code>BRK</code> instruction to end the program.</p>
<p>More information is available in this <a href="http://archive.org/stream/VIC-20ProgrammersReferenceGuide1stEdition6thPrinti/VIC-20_Programmers_Reference_Guide_1st_Edition_6th_Printing#page/n157/mode/2up">6502 instruction reference</a>.</p>
<p>If we were to disassemble the full program with:</p>
<pre><code class="language-text">.D 1400, 1412
</code></pre>
<p>We would get:</p>
<pre><code class="language-text">., 1400 LDA #$93
., 1402 JSR $FFD2
., 1405 LDX #$00
., 1407 LDA $1413, X
., 140A BEQ $1412
., 140C JSR $FFD2
., 140F INX
., 1410 BNE $1407
., 1412 BRK
</code></pre>
<p>Press &lt;Return&gt; to get back to the <code>.</code> prompt.</p>
<p>The program will print a string, located at <code>$1413</code> just past the <code>BRK</code> instruction.  This is a &quot;Hello, World!&quot; program, so to find the correct bytes to represent that string we'll look at this list of <a href="http://archive.org/stream/VIC-20ProgrammersReferenceGuide1stEdition6thPrinti/VIC-20_Programmers_Reference_Guide_1st_Edition_6th_Printing#page/n287/mode/2up">ASCII and CHR$ Codes</a>, to come up with the following decimal numbers representing the string:</p>
<pre><code class="language-text">72 69 76 76 79 44 32 87 79 82 76 68 33 13 00
H  E  L  L  O  ,     W  O  R  L  D  !
</code></pre>
<p><em>13 is Carriage return, 32 is space and 00 marks the end of the string</em>.</p>
<p>This is then translated into hex to produce:</p>
<pre><code class="language-text">48 45 4C 4C 4F
2C 20 57 4F 52
4C 44 21 0D 00
</code></pre>
<p>Enter these bytes starting from <code>$1413</code> with the <code>M</code> command:</p>
<pre><code class="language-text">.M 1413
</code></pre>
<p>You will see the address <code>$1413</code> followed by five octets.  Use your cursors to move over to the first octet and alter each in turn to match the list of hexadecimal numbers above.  After five have been entered press &lt;Return&gt; to enter the next five. Repeat until all the octets have been entered and then press &lt;Return&gt; again to stop entering and return to the <code>.</code> prompt.  Note that the last memory location mentioned by the <code>M</code> command is <code>$1422</code>; we will need this value later.</p>
<p>If we run the program:</p>
<pre><code class="language-text">.G 1400
</code></pre>
<p>You will see the screen below greeting the world.</p>
<img src="/img/articles/vic20-vicmon-hello-world.jpg" />
<p>You may have noticed that there is no real need for the first two instructions to call <code>$FFD2</code> as it would have been easier to prepend the string with <code>$93</code> to clear the screen.  However, I wanted to show how to use the <code>A</code> command to change the instruction at a location and carry on entering assembly.</p>
<h2>Loading/Saving</h2>
<p>If we wanted to Save our program above we would use the <code>S</code> command.  To save it to disk use:</p>
<pre><code class="language-text">.S &quot;HELLO&quot;,08,1400,1422
</code></pre>
<p><em>For cassette replace the <code>08</code> with <code>01</code></em>.</p>
<p>Note that, unlike the other Vicmon commands, we must use commas to separate the arguments.  Using the memory location <code>$1422</code> noted above, this saves the region of memory from <code>$1400</code> to <code>$1421</code> inclusive.  The end memory address must be given as one past the real end address.</p>
<p>If you turn your machine off, or do a hard reset from an emulator and go back into Vicmon.  You can now load the program back off cassette or disk:</p>
<pre><code class="language-text">.L &quot;HELLO&quot;,08
</code></pre>
<p><em>Again replace the <code>08</code> with <code>01</code> for cassette</em>.</p>
<p>If we wanted to access our saved program from basic without a Vicmon cartridge, then you would just change the <code>BRK</code> instruction to an <code>RTS</code> instruction before saving.  To load the program from BASIC:</p>
<pre><code class="language-basic">LOAD &quot;HELLO&quot;,8,1
</code></pre>
<p>To run the program from BASIC we use the SYS command.  In the following <code>5120</code> is the decimal equivalent for <code>$1400</code>:</p>
<pre><code class="language-basic">SYS 5120
</code></pre>
<h2>Where now?</h2>
<p>I hope this has given you enough information to get you started.  Below are some useful resources that will help you to increase your knowledge and progress further.</p>
<ul>
<li>Jim Butterfield's often recommended book <a href="http://www.bombjack.org/commodore/books/pdf/ML_for_the_C64_and_Other_Commodore_Computers.zip">Machine Language</a> available from the <a href="http://www.bombjack.org/commodore/books.htm">Commodore Books Collection</a> at <a href="http://www.bombjack.org/commodore/">DHL's Commdore Archive</a>.</li>
<li>An online version of Richard Mansfield's book <a href="http://www.6502dude.com/6502/mlb/mlb.htm">Machine Language for Beginners</a> book.</li>
<li>The <a href="http://www.sleepingelephant.com/denial/">Vic-20 Denial</a> website has a great forum.</li>
<li>The <a href="http://archive.org/details/VIC-20ProgrammersReferenceGuide1stEdition6thPrinti">VIC-20 Programmers Reference Guide 1st Edition 6th Printing</a>.</li>
<li>The <a href="http://funet.cbm8bit.com/cbm/vic20/manuals/VICMON-DOCS.zip">Vicmon Manual</a></li>
<li>The <a href="http://vice-emu.sourceforge.net/">VICE</a> Commodore emulator, which not only emulates the Vic-20, but also all the main 8-bit Commodore machines.</li>
<li>To see Vicmon in action watch our video: <a href="http://www.youtube.com/watch?v=kmvF85euefs">Creating a TTY Simulator in Assembly Language on the Vic-20</a> and read its associated <a href="/2013/05/04/creating-a-tty-simulator-in-assembly-language-on-the-vic-20/">article</a>.</li>
</ul>
<p>I have lots more to say about assembly language programming on the Vic-20, so subscribe to the <a href="http://feedproxy.google.com/TechTinkering">TechTinkering RSS</a> feed or keep an eye on the site to see further articles.</p>
      </div>
    </article>
  </div>
</div>

  <div class="row">
    <div class="col-md-12">
      <div id="cclicence">
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
          <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" />
        </a>
        <br />
        <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Beginning Assembly Programming on the Commodore VIC-20</span>
        by <a xmlns:cc="http://creativecommons.org/ns#" href="https://techtinkering.com/2013/04/16/beginning-assembly-programming-on-the-commodore-vic-20/" property="cc:attributionName" rel="cc:attributionURL">Lawrence Woodman</a>
       is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
      </div>
    </div>
  </div>


  <div class="discuss">
    <div class="row">
      <div class="col-md-6">
        <h2 style="margin-top:0;">Share This Post</h2>
        <ul class="share-buttons-text">
  <li><a class="btn btn-reddit" href="http://www.reddit.com/submit?url=https%3A%2F%2Ftechtinkering.com%2F2013%2F04%2F16%2Fbeginning-assembly-programming-on-the-commodore-vic-20%2F&title=Beginning%20Assembly%20Programming%20on%20the%20Commodore%20VIC-20" target="_blank" title="Submit to Reddit">Reddit</a></li>
  <li><a class="btn btn-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Ftechtinkering.com%2F2013%2F04%2F16%2Fbeginning-assembly-programming-on-the-commodore-vic-20%2F&quote=Beginning%20Assembly%20Programming%20on%20the%20Commodore%20VIC-20" target="_blank" title="Share on Facebook">Facebook</a></li>
  <li><a class="btn btn-twitter" href="https://twitter.com/intent/tweet?source=https%3A%2F%2Ftechtinkering.com%2F2013%2F04%2F16%2Fbeginning-assembly-programming-on-the-commodore-vic-20%2F&text=Beginning%20Assembly%20Programming%20on%20the%20Commodore%20VIC-20:%0Ahttps%3A%2F%2Ftechtinkering.com%2F2013%2F04%2F16%2Fbeginning-assembly-programming-on-the-commodore-vic-20%2F&via=TechTinkering" target="_blank" title="Tweet">Twitter</a></li>
  <li><a class="btn btn-email" href="mailto:?subject=Beginning%20Assembly%20Programming%20on%20the%20Commodore%20VIC-20&body=The%20Commodore%20Vic-20%20is%20a%20great%20machine%20to%20learn%20an%20assembly%20language%20on.%20%20It%20was%20released%20in%201981%20and%20was%20the%20first%20computer%20to%20sell%20one%20million%20units%2C%20which%20contributes%20to%20its%20popularity%20today.%20%20The%20...:%0A%0Ahttps%3A%2F%2Ftechtinkering.com%2F2013%2F04%2F16%2Fbeginning-assembly-programming-on-the-commodore-vic-20%2F" target="_blank" title="Send email">Email</a></li>
</ul>

        <h2>Feedback/Discuss</h2>
        <ul>

  <li><a class="btn btn-email" href="mailto:techtinkering@vlifesystems.com?subject=Comment:%20Beginning%20Assembly%20Programming%20on%20the%20Commodore%20VIC-20&body=Article%20URL:%20https%3A%2F%2Ftechtinkering.com%2F2013%2F04%2F16%2Fbeginning-assembly-programming-on-the-commodore-vic-20%2F%0A" title="Send us an email">Email</a></li>
</ul>
      </div>

      <div class="col-md-6">
        <form id="email-subscribe" action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open('https://feedburner.google.com/fb/a/mailverify?uri=TechTinkering', 'popupwindow', 'scrollbars=yes,width=550,height=520');return true">
  <p>Sign up to get new articles straight to your inbox.</p>
  <p><input type="text" style="width:180px" name="email" placeholder="Email address"/>
  <input type="hidden" value="TechTinkering" name="uri"/>
  <input type="hidden" name="loc" value="en_US"/>
  <input class="subscribe-button" type="submit" value="Subscribe" /></p>
  <p>Delivered by <a href="https://feedburner.google.com" target="_blank">FeedBurner</a></p>
</form>
      </div>
    </div>
  </div>


    <div class="row">
      <div class="col-md-12">
        <h2>Related Articles</h2>
      </div>
    </div>
    <div class="row margin-buffer">
  <div class="col-md-12">
        <header>
  <h3><a href="/articles/sweet-16-the-6502-dream-machine-ported-to-the-vic-20/">Sweet 16 (The 6502 Dream Machine) Ported to the VIC-20</a></h3>
  <span class="post-meta">
      <time datetime="2020-02-29">
        29 February 2020
      </time>
      &nbsp; / &nbsp;
      <a href="/articles/tag/assembly/">Assembly</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/commodore/">Commodore</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/programming/">Programming</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/retro/">Retro</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/vic-20/">VIC-20</a>
      &nbsp; &nbsp;
  </span>
</header>
<div>
  Sweet 16 was created by Steve Wozniak to reduce code size and make it easier to handle 16-bit pointers and arithmetic for his Apple Integer BASIC.  He wrote it around 1977 and referred to it in an arti...
  &nbsp;
  <a class="readMore" href="/articles/sweet-16-the-6502-dream-machine-ported-to-the-vic-20/">Read More</a>
</div>
        <header>
  <h3><a href="/articles/position-independent-code-6502-on-the-commodore-vic-20/">Position Independent Code (6502) on the Commodore VIC-20</a></h3>
  <span class="post-meta">
      <time datetime="2020-02-04">
         4 February 2020
      </time>
      &nbsp; / &nbsp;
      <a href="/articles/tag/assembly/">Assembly</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/commodore/">Commodore</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/programming/">Programming</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/retro/">Retro</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/vic-20/">VIC-20</a>
      &nbsp; &nbsp;
  </span>
</header>
<div>
  If we are writing 6502 machine code and want to to create a routine or program that can be placed in any location then we have to create Position Independent Code (PIC) or make the code relocatable.  H...
  &nbsp;
  <a class="readMore" href="/articles/position-independent-code-6502-on-the-commodore-vic-20/">Read More</a>
</div>
        <header>
  <h3><a href="/articles/adding-basic-stubs-to-assembly-language-on-the-commodore-vic-20/">Adding Basic Stubs to Assembly Language on the Commodore VIC-20</a></h3>
  <span class="post-meta">
      <time datetime="2020-01-16">
        16 January 2020
      </time>
      &nbsp; / &nbsp;
      <a href="/articles/tag/assembly/">Assembly</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/commodore/">Commodore</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/programming/">Programming</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/retro/">Retro</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/vic-20/">VIC-20</a>
      &nbsp; &nbsp;
  </span>
</header>
<div>
  To make machine language programs more friendly it's nice to add a Basic stub which contains a line with a SYS statement to start the code.  This is easy to do on the VIC-20 and the process gives you a...
  &nbsp;
  <a class="readMore" href="/articles/adding-basic-stubs-to-assembly-language-on-the-commodore-vic-20/">Read More</a>
</div>
        <header>
  <h3><a href="/articles/hand-assembling-to-machine-code-on-the-commodore-vic-20/">Hand Assembling to Machine Code on the Commodore VIC-20</a></h3>
  <span class="post-meta">
      <time datetime="2019-12-18">
        18 December 2019
      </time>
      &nbsp; / &nbsp;
      <a href="/articles/tag/assembly/">Assembly</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/commodore/">Commodore</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/programming/">Programming</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/retro/">Retro</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/vic-20/">VIC-20</a>
      &nbsp; &nbsp;
  </span>
</header>
<div>
  I quite enjoy designing machine language routines on paper and then hand assembling them.  For many people this would have been their only option until they got a more advanced machine language monitor...
  &nbsp;
  <a class="readMore" href="/articles/hand-assembling-to-machine-code-on-the-commodore-vic-20/">Read More</a>
</div>
        <header>
  <h3><a href="/2013/05/04/creating-a-tty-simulator-in-assembly-language-on-the-vic-20/">Creating a TTY Simulator in Assembly Language on the VIC-20</a></h3>
  <span class="post-meta">
      <time datetime="2013-05-04">
         4 May 2013
      </time>
      &nbsp; / &nbsp;
      <a href="/articles/tag/assembly/">Assembly</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/commodore/">Commodore</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/programming/">Programming</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/retro/">Retro</a>
      &nbsp; &nbsp;
      <a href="/articles/tag/vic-20/">VIC-20</a>
      &nbsp; &nbsp;
  </span>
</header>
<div>
  The Vicmon machine language cartridge is an excellent tool for exploring the Vic-20.  This article and its associated video will show you how to use it to create a simple program that will change the n...
  &nbsp;
  <a class="readMore" href="/2013/05/04/creating-a-tty-simulator-in-assembly-language-on-the-vic-20/">Read More</a>
</div>
  </div>
</div>

    </div>

    <footer>
  <nav class="navbar navbar-default">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <strong>Legal:</strong> &nbsp;
          <a href="/terms/">T & C</a>, &nbsp; &nbsp;
          <a href="/privacy/">Privacy Policy</a>
        </div>
      </div>
    </div>
  </nav>
</footer>
  </body>
</html>